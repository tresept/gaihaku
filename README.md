# 学生寮 外泊・欠食管理システム (Gaihaku System)

これは、学生寮に住む学生が外泊や欠食の予定をオンラインで簡単に登録・管理するためのWebアプリケーションです。寮の管理者は、全学生の登録状況を一覧で確認し、必要に応じて情報を更新したり、新しいユーザーを追加したりすることができます。

## 主な機能

### 一般ユーザー向け
- **ログイン**: 学生は個別の学籍番号とパスワードでログインします。
- **外泊・欠食登録**: ログイン後、1週間先までの外泊や朝食・昼食・夕食の欠食予定を直感的なUIで登録・更新できます。
- **レスポンシブデザイン**: PC、タブレット、スマートフォンなど、様々なデバイスから快適に利用できます。

### 管理者向け
- **管理者ダッシュボード**: 全ての登録ユーザーを一覧で確認できます。
- **ユーザー記録の閲覧・編集**: 各ユーザーの外泊・欠食記録を閲覧し、代理で編集することが可能です。
- **ユーザー追加**: 新しい学生のアカウントを簡単に追加できます。
- **専用ログイン**: 管理者アカウントでログインすると、自動的に管理者用ダッシュボードにリダイレクトされます。

## 技術スタック
- **バックエンド**: Go (Echoフレームワーク)
- **データベース**: PostgreSQL
- **フロントエンド**: HTML, CSS, JavaScript (Bootstrap 5)
- **コンテナ技術**: Docker, Docker Compose

## セットアップと実行方法

### 前提条件
- [Docker](https://www.docker.com/get-started) と [Docker Compose](https://docs.docker.com/compose/install/) がインストールされていること。

### 手順
1. **リポジトリをクローンする**:
   ```bash
   git clone https://github.com/your-repo/gaihaku.git
   cd gaihaku
   ```

2. **環境変数を設定する**:
   `docker-compose.yml` ファイルと同じ階層に `.env` という名前のファイルを作成し、セッション管理用の秘密鍵を設定します。
   ```
   SESSION_SECRET_KEY=your-very-secret-and-long-key
   ```
   **注意**: `your-very-secret-and-long-key` の部分は、必ずランダムで十分に長い文字列に変更してください。このキーが漏洩すると、セッション情報が第三者に窃取される危険性があります。

3. **Dockerコンテナをビルドして起動する**:
   ```bash
   docker-compose up --build
   ```
   `-d` フラグを付けると、バックグラウンドで実行できます。

4. **アプリケーションにアクセスする**:
   Webブラウザを開き、 `http://localhost:8080` にアクセスします。

### 管理者アカウント
- アプリケーションの初回起動時に、以下の管理者アカウントが自動的に作成されます。
  - **ユーザー名**: `admin`
  - **パスワード**: `admin`
- **重要**: 本番環境で利用する場合は、初回ログイン後に必ずパスワードを変更するか、より安全な初期パスワードを設定するようにコードを修正してください。

## 開発
- `dev/hash.go` はパスワードのハッシュ値を生成するための開発用ユーティリティです。
  ```bash
  go run dev/hash.go "your-password"
  ```